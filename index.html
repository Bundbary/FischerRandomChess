<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fischer Random Chess</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header>
        <h1>‚ôî Fischer Random Chess</h1>
        <div class="header-controls">
            <div id="game-status">Click "New Game" to start</div>
            <button id="help-btn" class="help-button">?</button>
        </div>
    </header>

    <div class="container">
        <div class="game-area">
            <div class="board-section">
                <div class="player-info" id="player-black">
                    <span class="player-name">Black Player</span>
                    <span class="player-status"></span>
                </div>

                <div id="chess-board" class="chess-board">
                    <!-- Board squares will be generated by JS -->
                </div>

                <div class="player-info" id="player-white">
                    <span class="player-name">White Player</span>
                    <span class="player-status"></span>
                </div>
            </div>
        </div>

        <div class="side-panel">
            <div class="panel-section">
                <div class="panel-header" data-panel="controls">
                    <h3>Game Controls</h3>
                    <button class="panel-toggle">‚àí</button>
                </div>
                <div class="panel-content" id="controls-content">
                    <div class="controls">
                        <button id="new-game-btn">New Game</button>
                        <button id="join-game-btn">Join Game</button>
                    </div>
                    <div id="game-link" class="game-link hidden">
                        <label>Share this link:</label>
                        <input type="text" id="game-url" readonly>
                        <div class="link-buttons">
                            <button id="copy-link-btn">Copy Link</button>
                            <button id="open-link-btn">Open in New Tab</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel-section">
                <div class="panel-header" data-panel="theme">
                    <h3>Board Theme</h3>
                    <button class="panel-toggle">‚àí</button>
                </div>
                <div class="panel-content" id="theme-content">
                    <div class="theme-picker">
                        <div class="color-picker-container">
                            <label for="board-color-picker">Board Color:</label>
                            <input type="color" id="board-color-picker" value="#D4A574">
                            <div class="theme-presets">
                                <button class="theme-preset" data-color="#D4A574" style="background: #D4A574" title="Classic"></button>
                                <button class="theme-preset" data-color="#7fa650" style="background: #7fa650" title="Green"></button>
                                <button class="theme-preset" data-color="#5c85ad" style="background: #5c85ad" title="Blue"></button>
                                <button class="theme-preset" data-color="#a04747" style="background: #a04747" title="Red"></button>
                                <button class="theme-preset" data-color="#8b5a8c" style="background: #8b5a8c" title="Purple"></button>
                                <button class="theme-preset" data-color="#808080" style="background: #808080" title="Grey"></button>
                            </div>
                            
                            <div class="contrast-control">
                                <label for="contrast-slider">Contrast:</label>
                                <div class="slider-container">
                                    <input type="range" id="contrast-slider" min="10" max="50" value="25" step="5">
                                    <div class="slider-labels">
                                        <span>Low</span>
                                        <span>High</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel-section">
                <div class="panel-header" data-panel="history">
                    <h3>Move History</h3>
                    <button class="panel-toggle">‚àí</button>
                </div>
                <div class="panel-content" id="history-content">
                    <div id="move-history" class="move-history">
                        <div id="moves-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Fischer Random Chess (Chess960) Rules</h2>
                <button id="close-help" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="rules-section">
                    <h3>üéØ What is Fischer Random Chess?</h3>
                    <p>Fischer Random Chess (also called Chess960) is a variant of chess created by Bobby Fischer. The game uses the same pieces and rules as regular chess, but the starting positions of pieces are randomized to eliminate memorized opening theory and encourage creative play.</p>
                </div>

                <div class="rules-section">
                    <h3>üé≤ Setup Rules</h3>
                    <ul>
                        <li><strong>960 Positions:</strong> There are exactly 960 possible starting positions</li>
                        <li><strong>Pawns:</strong> Always start on their normal squares (2nd and 7th ranks)</li>
                        <li><strong>King:</strong> Must be placed between the two rooks</li>
                        <li><strong>Bishops:</strong> Must be on opposite colored squares</li>
                        <li><strong>Mirrored:</strong> Black pieces mirror white pieces exactly</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>üè∞ Castling in Fischer Random</h3>
                    <p><strong>Most Important:</strong> The final positions are always the same as regular chess!</p>
                    <ul>
                        <li><strong>Kingside Castling:</strong> King ends on g1/g8, Rook ends on f1/f8</li>
                        <li><strong>Queenside Castling:</strong> King ends on c1/c8, Rook ends on d1/d8</li>
                        <li><strong>Requirements:</strong> Same as regular chess - no pieces between, king not in check, neither piece has moved</li>
                        <li><strong>Special:</strong> All squares between initial and final positions must be empty</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>‚ôú All Other Rules</h3>
                    <p>Everything else is exactly the same as regular chess:</p>
                    <ul>
                        <li>Piece movements, captures, en passant</li>
                        <li>Check, checkmate, and stalemate</li>
                        <li>Pawn promotion</li>
                        <li>Draw conditions</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>üí° Bobby Fischer's Vision</h3>
                    <p><em>"I want to keep the old chess game. But just making a change so the starting positions are mixed, so it's not degenerated down to memorization and prearrangement like it is today."</em></p>
                    <p>Fischer created this variant to restore creativity and reduce the importance of memorized opening theory.</p>
                </div>

                <div class="rules-section">
                    <h3>üîó Learn More</h3>
                    <p>For detailed rules and examples: <a href="https://www.chess.com/terms/chess960" target="_blank">Chess.com Chess960 Guide</a></p>
                </div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="/js/main.js"></script>
</body>
</html>